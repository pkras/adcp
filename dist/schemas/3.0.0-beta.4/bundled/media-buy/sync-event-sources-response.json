{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-beta.4/bundled/media-buy/sync-event-sources-response.json",
  "title": "Sync Event Sources Response",
  "description": "Response from event source sync operation. Returns either per-source results OR operation-level errors.",
  "type": "object",
  "oneOf": [
    {
      "title": "SyncEventSourcesSuccess",
      "description": "Success response - sync operation processed event sources",
      "type": "object",
      "properties": {
        "event_sources": {
          "type": "array",
          "description": "Results for each event source, including both synced and seller-managed sources on the account",
          "items": {
            "type": "object",
            "properties": {
              "event_source_id": {
                "type": "string",
                "description": "Event source ID from the request"
              },
              "name": {
                "type": "string",
                "description": "Name of the event source"
              },
              "seller_id": {
                "type": "string",
                "description": "Seller-assigned identifier for this event source (the ID in the seller's ad platform)"
              },
              "event_types": {
                "type": "array",
                "description": "Event types this source handles",
                "items": {
                  "title": "Event Type",
                  "description": "Standard marketing event types for event logging, aligned with IAB ECAPI",
                  "type": "string",
                  "enum": [
                    "page_view",
                    "view_content",
                    "select_content",
                    "select_item",
                    "search",
                    "share",
                    "add_to_cart",
                    "remove_from_cart",
                    "viewed_cart",
                    "add_to_wishlist",
                    "initiate_checkout",
                    "add_payment_info",
                    "purchase",
                    "refund",
                    "lead",
                    "qualify_lead",
                    "close_convert_lead",
                    "disqualify_lead",
                    "complete_registration",
                    "subscribe",
                    "start_trial",
                    "app_install",
                    "app_launch",
                    "contact",
                    "schedule",
                    "donate",
                    "submit_application",
                    "custom"
                  ],
                  "enumDescriptions": {
                    "page_view": "User viewed a page",
                    "view_content": "User viewed specific content (product, article, etc.)",
                    "select_content": "User selected or clicked on content (article, video, etc.)",
                    "select_item": "User selected a specific product or item from a list",
                    "search": "User performed a search",
                    "share": "User shared content via social or messaging",
                    "add_to_cart": "User added an item to cart",
                    "remove_from_cart": "User removed an item from cart",
                    "viewed_cart": "User viewed their shopping cart",
                    "add_to_wishlist": "User added an item to a wishlist",
                    "initiate_checkout": "User started checkout process",
                    "add_payment_info": "User added payment information",
                    "purchase": "User completed a purchase",
                    "refund": "A purchase was fully or partially refunded (adjusts ROAS)",
                    "lead": "User expressed interest (form submission, signup, etc.)",
                    "qualify_lead": "Lead qualified by sales or scoring criteria",
                    "close_convert_lead": "Lead converted to a customer or closed deal",
                    "disqualify_lead": "Lead disqualified or marked as not viable",
                    "complete_registration": "User completed account registration",
                    "subscribe": "User subscribed to a service or newsletter",
                    "start_trial": "User started a free trial",
                    "app_install": "User installed an application",
                    "app_launch": "User launched an application",
                    "contact": "User initiated contact (call, message, etc.)",
                    "schedule": "User scheduled an appointment or event",
                    "donate": "User made a donation",
                    "submit_application": "User submitted an application (loan, job, etc.)",
                    "custom": "Custom event type (specify in custom_event_name)"
                  }
                }
              },
              "action_source": {
                "title": "Action Source",
                "description": "Type of event source (website pixel, app SDK, in-store, etc.)",
                "type": "string",
                "enum": [
                  "website",
                  "app",
                  "offline",
                  "phone_call",
                  "chat",
                  "email",
                  "in_store",
                  "system_generated",
                  "other"
                ],
                "enumDescriptions": {
                  "website": "Event occurred on a website",
                  "app": "Event occurred in a mobile or desktop app",
                  "offline": "Event occurred offline (imported data)",
                  "phone_call": "Event originated from a phone call",
                  "chat": "Event originated from a chat conversation",
                  "email": "Event originated from an email interaction",
                  "in_store": "Event occurred at a physical retail location",
                  "system_generated": "Event generated by an automated system",
                  "other": "Other source (specify in ext)"
                }
              },
              "managed_by": {
                "type": "string",
                "enum": [
                  "buyer",
                  "seller"
                ],
                "description": "Who manages this event source. 'buyer' = configured via this sync. 'seller' = always-on, managed by the seller (e.g. Amazon sales attribution for Amazon advertisers)."
              },
              "setup": {
                "type": "object",
                "description": "Implementation details for activating this event source (e.g. JavaScript tag, pixel URL)",
                "properties": {
                  "snippet": {
                    "type": "string",
                    "description": "Code snippet to place on the site (JavaScript, HTML pixel, etc.)"
                  },
                  "snippet_type": {
                    "type": "string",
                    "enum": [
                      "javascript",
                      "html",
                      "pixel_url",
                      "server_only"
                    ],
                    "description": "Type of implementation. 'server_only' means no client-side tag is needed."
                  },
                  "instructions": {
                    "type": "string",
                    "description": "Human/agent-readable setup instructions"
                  }
                },
                "additionalProperties": true
              },
              "action": {
                "type": "string",
                "enum": [
                  "created",
                  "updated",
                  "unchanged",
                  "deleted",
                  "failed"
                ],
                "description": "Action taken for this event source"
              },
              "errors": {
                "type": "array",
                "description": "Errors for this event source (only present when action='failed')",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "event_source_id",
              "action"
            ],
            "additionalProperties": true
          }
        },
        "sandbox": {
          "type": "boolean",
          "description": "When true, this response contains simulated data from sandbox mode."
        },
        "context": {
          "title": "Context Object",
          "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
          "type": "object",
          "additionalProperties": true
        },
        "ext": {
          "title": "Extension Object",
          "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "event_sources"
      ],
      "additionalProperties": true,
      "not": {
        "required": [
          "errors"
        ]
      }
    },
    {
      "title": "SyncEventSourcesError",
      "description": "Error response - operation failed completely",
      "type": "object",
      "properties": {
        "errors": {
          "type": "array",
          "description": "Operation-level errors that prevented processing",
          "items": {
            "title": "Error",
            "description": "Standard error structure for task-specific errors and warnings",
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "Error code for programmatic handling"
              },
              "message": {
                "type": "string",
                "description": "Human-readable error message"
              },
              "field": {
                "type": "string",
                "description": "Field path associated with the error (e.g., 'packages[0].targeting')"
              },
              "suggestion": {
                "type": "string",
                "description": "Suggested fix for the error"
              },
              "retry_after": {
                "type": "number",
                "description": "Seconds to wait before retrying the operation",
                "minimum": 0
              },
              "details": {
                "type": "object",
                "description": "Additional task-specific error details",
                "additionalProperties": true
              }
            },
            "required": [
              "code",
              "message"
            ],
            "additionalProperties": true
          },
          "minItems": 1
        },
        "context": {
          "title": "Context Object",
          "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
          "type": "object",
          "additionalProperties": true
        },
        "ext": {
          "title": "Extension Object",
          "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "errors"
      ],
      "additionalProperties": true,
      "not": {
        "anyOf": [
          {
            "required": [
              "event_sources"
            ]
          },
          {
            "required": [
              "sandbox"
            ]
          }
        ]
      }
    }
  ],
  "_bundled": {
    "generatedAt": "2026-02-26T12:28:33.841Z",
    "note": "This is a bundled schema with all $ref resolved inline. For the modular version with references, use the parent directory."
  }
}