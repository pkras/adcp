{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-beta.4/bundled/media-buy/get-media-buy-delivery-response.json",
  "title": "Get Media Buy Delivery Response",
  "description": "Response payload for get_media_buy_delivery task",
  "type": "object",
  "properties": {
    "notification_type": {
      "type": "string",
      "enum": [
        "scheduled",
        "final",
        "delayed",
        "adjusted"
      ],
      "description": "Type of webhook notification (only present in webhook deliveries): scheduled = regular periodic update, final = campaign completed, delayed = data not yet available, adjusted = resending period with updated data"
    },
    "partial_data": {
      "type": "boolean",
      "description": "Indicates if any media buys in this webhook have missing/delayed data (only present in webhook deliveries)"
    },
    "unavailable_count": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of media buys with reporting_delayed or failed status (only present in webhook deliveries when partial_data is true)"
    },
    "sequence_number": {
      "type": "integer",
      "minimum": 1,
      "description": "Sequential notification number (only present in webhook deliveries, starts at 1)"
    },
    "next_expected_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp for next expected notification (only present in webhook deliveries when notification_type is not 'final')"
    },
    "reporting_period": {
      "type": "object",
      "description": "Date range for the report. All periods use UTC timezone.",
      "properties": {
        "start": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 start timestamp in UTC (e.g., 2024-02-05T00:00:00Z)"
        },
        "end": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 end timestamp in UTC (e.g., 2024-02-05T23:59:59Z)"
        }
      },
      "required": [
        "start",
        "end"
      ],
      "additionalProperties": true
    },
    "currency": {
      "type": "string",
      "description": "ISO 4217 currency code",
      "pattern": "^[A-Z]{3}$"
    },
    "attribution_window": {
      "title": "Attribution Window",
      "description": "Attribution methodology and lookback windows used for conversion metrics in this response. All media buys from a single seller share the same attribution methodology. Enables cross-platform comparison (e.g., Amazon 14-day click vs. Criteo 30-day click).",
      "type": "object",
      "properties": {
        "click_window_days": {
          "type": "integer",
          "description": "Click-through attribution window in days. Conversions occurring within this many days after a click are attributed to the ad.",
          "minimum": 0
        },
        "view_window_days": {
          "type": "integer",
          "description": "View-through attribution window in days. Conversions occurring within this many days after an ad impression (without click) are attributed to the ad.",
          "minimum": 0
        },
        "model": {
          "title": "Attribution Model",
          "description": "Attribution model used to assign credit when multiple touchpoints exist",
          "type": "string",
          "enum": [
            "last_touch",
            "first_touch",
            "linear",
            "time_decay",
            "data_driven"
          ]
        }
      },
      "required": [
        "model"
      ],
      "additionalProperties": true
    },
    "aggregated_totals": {
      "type": "object",
      "description": "Combined metrics across all returned media buys. Only included in API responses (get_media_buy_delivery), not in webhook notifications.",
      "properties": {
        "impressions": {
          "type": "number",
          "description": "Total impressions delivered across all media buys",
          "minimum": 0
        },
        "spend": {
          "type": "number",
          "description": "Total amount spent across all media buys",
          "minimum": 0
        },
        "clicks": {
          "type": "number",
          "description": "Total clicks across all media buys (if applicable)",
          "minimum": 0
        },
        "video_completions": {
          "type": "number",
          "description": "Total video completions across all media buys (if applicable)",
          "minimum": 0
        },
        "conversions": {
          "type": "number",
          "description": "Total conversions across all media buys (if applicable)",
          "minimum": 0
        },
        "conversion_value": {
          "type": "number",
          "description": "Total conversion value across all media buys (if applicable)",
          "minimum": 0
        },
        "roas": {
          "type": "number",
          "description": "Aggregate return on ad spend across all media buys (total conversion_value / total spend)",
          "minimum": 0
        },
        "new_to_brand_rate": {
          "type": "number",
          "description": "Fraction of total conversions across all media buys from first-time brand buyers (weighted by conversion volume, not a simple average of per-buy rates)",
          "minimum": 0,
          "maximum": 1
        },
        "cost_per_acquisition": {
          "type": "number",
          "description": "Aggregate cost per conversion across all media buys (total spend / total conversions)",
          "minimum": 0
        },
        "media_buy_count": {
          "type": "integer",
          "description": "Number of media buys included in the response",
          "minimum": 0
        }
      },
      "required": [
        "impressions",
        "spend",
        "media_buy_count"
      ],
      "additionalProperties": true
    },
    "media_buy_deliveries": {
      "type": "array",
      "description": "Array of delivery data for media buys. When used in webhook notifications, may contain multiple media buys aggregated by publisher. When used in get_media_buy_delivery API responses, typically contains requested media buys.",
      "items": {
        "type": "object",
        "properties": {
          "media_buy_id": {
            "type": "string",
            "description": "Publisher's media buy identifier"
          },
          "buyer_ref": {
            "type": "string",
            "description": "Buyer's reference identifier for this media buy"
          },
          "buyer_campaign_ref": {
            "type": "string",
            "description": "Buyer's campaign reference label from create_media_buy.buyer_campaign_ref. Groups related operations under a single campaign for CRM and ad server correlation; may be absent when not provided at creation time."
          },
          "status": {
            "type": "string",
            "description": "Current media buy status. Lifecycle states use the same taxonomy as media-buy-status (`pending_activation`, `active`, `paused`, `completed`). In webhook context, reporting_delayed indicates data temporarily unavailable. `pending` is accepted as a legacy alias for pending_activation.",
            "enum": [
              "pending_activation",
              "pending",
              "active",
              "paused",
              "completed",
              "failed",
              "reporting_delayed"
            ]
          },
          "expected_availability": {
            "type": "string",
            "format": "date-time",
            "description": "When delayed data is expected to be available (only present when status is reporting_delayed)"
          },
          "is_adjusted": {
            "type": "boolean",
            "description": "Indicates this delivery contains updated data for a previously reported period. Buyer should replace previous period data with these totals."
          },
          "pricing_model": {
            "title": "Pricing Model",
            "description": "Pricing model used for this media buy",
            "type": "string",
            "enum": [
              "cpm",
              "vcpm",
              "cpc",
              "cpcv",
              "cpv",
              "cpp",
              "cpa",
              "flat_rate",
              "time"
            ],
            "enumDescriptions": {
              "cpm": "Cost Per Mille - cost per 1,000 impressions",
              "vcpm": "Viewable Cost Per Mille - cost per 1,000 viewable impressions (MRC standard)",
              "cpc": "Cost Per Click - cost per click on the ad",
              "cpcv": "Cost Per Completed View - cost per 100% video/audio completion",
              "cpv": "Cost Per View - cost per view at publisher-defined threshold (e.g., 50% completion)",
              "cpp": "Cost Per Point - cost per Gross Rating Point or Target Rating Point (TV/audio)",
              "cpa": "Cost Per Acquisition - cost per conversion event (purchase, lead, signup, etc.)",
              "flat_rate": "Flat Rate - fixed cost regardless of delivery volume (sponsorships, takeovers)",
              "time": "Time - cost per time unit (hour, day, week, or month) that scales with campaign duration"
            }
          },
          "totals": {
            "allOf": [
              {
                "title": "Delivery Metrics",
                "description": "Standard delivery metrics that can be reported at media buy, package, or creative level",
                "type": "object",
                "properties": {
                  "impressions": {
                    "type": "number",
                    "description": "Impressions delivered",
                    "minimum": 0
                  },
                  "spend": {
                    "type": "number",
                    "description": "Amount spent",
                    "minimum": 0
                  },
                  "clicks": {
                    "type": "number",
                    "description": "Total clicks",
                    "minimum": 0
                  },
                  "ctr": {
                    "type": "number",
                    "description": "Click-through rate (clicks/impressions)",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "views": {
                    "type": "number",
                    "description": "Views at threshold (for CPV)",
                    "minimum": 0
                  },
                  "completed_views": {
                    "type": "number",
                    "description": "Video/audio completions. When the package has a completed_views optimization goal with view_duration_seconds, completions are counted at that threshold rather than 100% completion.",
                    "minimum": 0
                  },
                  "completion_rate": {
                    "type": "number",
                    "description": "Completion rate (completed_views/impressions)",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "conversions": {
                    "type": "number",
                    "description": "Total conversions attributed to this delivery. When by_event_type is present, this equals the sum of all by_event_type[].count entries.",
                    "minimum": 0
                  },
                  "conversion_value": {
                    "type": "number",
                    "description": "Total monetary value of attributed conversions (in the reporting currency)",
                    "minimum": 0
                  },
                  "roas": {
                    "type": "number",
                    "description": "Return on ad spend (conversion_value / spend)",
                    "minimum": 0
                  },
                  "cost_per_acquisition": {
                    "type": "number",
                    "description": "Cost per conversion (spend / conversions)",
                    "minimum": 0
                  },
                  "new_to_brand_rate": {
                    "type": "number",
                    "description": "Fraction of conversions from first-time brand buyers (0 = none, 1 = all)",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "leads": {
                    "type": "number",
                    "description": "Leads generated (convenience alias for by_event_type where event_type='lead')",
                    "minimum": 0
                  },
                  "by_event_type": {
                    "type": "array",
                    "description": "Conversion metrics broken down by event type. Spend-derived metrics (ROAS, CPA) are only available at the package/totals level since spend cannot be attributed to individual event types.",
                    "items": {
                      "type": "object",
                      "properties": {
                        "event_type": {
                          "title": "Event Type",
                          "description": "The event type",
                          "type": "string",
                          "enum": [
                            "page_view",
                            "view_content",
                            "select_content",
                            "select_item",
                            "search",
                            "share",
                            "add_to_cart",
                            "remove_from_cart",
                            "viewed_cart",
                            "add_to_wishlist",
                            "initiate_checkout",
                            "add_payment_info",
                            "purchase",
                            "refund",
                            "lead",
                            "qualify_lead",
                            "close_convert_lead",
                            "disqualify_lead",
                            "complete_registration",
                            "subscribe",
                            "start_trial",
                            "app_install",
                            "app_launch",
                            "contact",
                            "schedule",
                            "donate",
                            "submit_application",
                            "custom"
                          ],
                          "enumDescriptions": {
                            "page_view": "User viewed a page",
                            "view_content": "User viewed specific content (product, article, etc.)",
                            "select_content": "User selected or clicked on content (article, video, etc.)",
                            "select_item": "User selected a specific product or item from a list",
                            "search": "User performed a search",
                            "share": "User shared content via social or messaging",
                            "add_to_cart": "User added an item to cart",
                            "remove_from_cart": "User removed an item from cart",
                            "viewed_cart": "User viewed their shopping cart",
                            "add_to_wishlist": "User added an item to a wishlist",
                            "initiate_checkout": "User started checkout process",
                            "add_payment_info": "User added payment information",
                            "purchase": "User completed a purchase",
                            "refund": "A purchase was fully or partially refunded (adjusts ROAS)",
                            "lead": "User expressed interest (form submission, signup, etc.)",
                            "qualify_lead": "Lead qualified by sales or scoring criteria",
                            "close_convert_lead": "Lead converted to a customer or closed deal",
                            "disqualify_lead": "Lead disqualified or marked as not viable",
                            "complete_registration": "User completed account registration",
                            "subscribe": "User subscribed to a service or newsletter",
                            "start_trial": "User started a free trial",
                            "app_install": "User installed an application",
                            "app_launch": "User launched an application",
                            "contact": "User initiated contact (call, message, etc.)",
                            "schedule": "User scheduled an appointment or event",
                            "donate": "User made a donation",
                            "submit_application": "User submitted an application (loan, job, etc.)",
                            "custom": "Custom event type (specify in custom_event_name)"
                          }
                        },
                        "event_source_id": {
                          "type": "string",
                          "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                        },
                        "count": {
                          "type": "number",
                          "description": "Number of events of this type",
                          "minimum": 0
                        },
                        "value": {
                          "type": "number",
                          "description": "Total monetary value of events of this type",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "event_type",
                        "count"
                      ],
                      "additionalProperties": true
                    }
                  },
                  "grps": {
                    "type": "number",
                    "description": "Gross Rating Points delivered (for CPP)",
                    "minimum": 0
                  },
                  "reach": {
                    "type": "number",
                    "description": "Unique reach - units depend on measurement provider (e.g., individuals, households, devices, cookies). See delivery_measurement.provider for methodology.",
                    "minimum": 0
                  },
                  "frequency": {
                    "type": "number",
                    "description": "Average frequency per individual (typically measured over campaign duration, but can vary by measurement provider)",
                    "minimum": 0
                  },
                  "quartile_data": {
                    "type": "object",
                    "description": "Video quartile completion data",
                    "properties": {
                      "q1_views": {
                        "type": "number",
                        "description": "25% completion views",
                        "minimum": 0
                      },
                      "q2_views": {
                        "type": "number",
                        "description": "50% completion views",
                        "minimum": 0
                      },
                      "q3_views": {
                        "type": "number",
                        "description": "75% completion views",
                        "minimum": 0
                      },
                      "q4_views": {
                        "type": "number",
                        "description": "100% completion views",
                        "minimum": 0
                      }
                    }
                  },
                  "dooh_metrics": {
                    "type": "object",
                    "description": "DOOH-specific metrics (only included for DOOH campaigns)",
                    "properties": {
                      "loop_plays": {
                        "type": "integer",
                        "description": "Number of times ad played in rotation",
                        "minimum": 0
                      },
                      "screens_used": {
                        "type": "integer",
                        "description": "Number of unique screens displaying the ad",
                        "minimum": 0
                      },
                      "screen_time_seconds": {
                        "type": "integer",
                        "description": "Total display time in seconds",
                        "minimum": 0
                      },
                      "sov_achieved": {
                        "type": "number",
                        "description": "Actual share of voice delivered (0.0 to 1.0)",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "calculation_notes": {
                        "type": "string",
                        "description": "Explanation of how DOOH impressions were calculated"
                      },
                      "venue_breakdown": {
                        "type": "array",
                        "description": "Per-venue performance breakdown",
                        "items": {
                          "type": "object",
                          "properties": {
                            "venue_id": {
                              "type": "string",
                              "description": "Venue identifier"
                            },
                            "venue_name": {
                              "type": "string",
                              "description": "Human-readable venue name"
                            },
                            "venue_type": {
                              "type": "string",
                              "description": "Venue type (e.g., 'airport', 'transit', 'retail', 'billboard')"
                            },
                            "impressions": {
                              "type": "integer",
                              "description": "Impressions delivered at this venue",
                              "minimum": 0
                            },
                            "loop_plays": {
                              "type": "integer",
                              "description": "Loop plays at this venue",
                              "minimum": 0
                            },
                            "screens_used": {
                              "type": "integer",
                              "description": "Number of screens used at this venue",
                              "minimum": 0
                            }
                          },
                          "required": [
                            "venue_id",
                            "impressions"
                          ],
                          "additionalProperties": true
                        }
                      }
                    },
                    "additionalProperties": true
                  },
                  "viewability": {
                    "type": "object",
                    "description": "Viewability metrics. Viewable rate should be calculated as viewable_impressions / measurable_impressions (not total impressions), since some environments cannot measure viewability.",
                    "properties": {
                      "measurable_impressions": {
                        "type": "number",
                        "description": "Impressions where viewability could be measured. Excludes environments without measurement capability (e.g., non-Intersection Observer browsers, certain app environments).",
                        "minimum": 0
                      },
                      "viewable_impressions": {
                        "type": "number",
                        "description": "Impressions that met the viewability threshold defined by the measurement standard.",
                        "minimum": 0
                      },
                      "viewable_rate": {
                        "type": "number",
                        "description": "Viewable impression rate (viewable_impressions / measurable_impressions). Range 0.0 to 1.0.",
                        "minimum": 0,
                        "maximum": 1
                      },
                      "standard": {
                        "type": "string",
                        "enum": [
                          "mrc",
                          "groupm"
                        ],
                        "description": "Viewability measurement standard. 'mrc': 50% of pixels in view for 1 second (display) or 2 seconds (video), per MRC/IAB guidelines. 'groupm': 100% of pixels in view for the same durations. These are materially different thresholds and should not be compared across standards."
                      }
                    },
                    "additionalProperties": true
                  },
                  "engagements": {
                    "type": "number",
                    "description": "Total engagements — direct interactions with the ad beyond viewing. Includes social reactions/comments/shares, story/unit opens, interactive overlay taps on CTV, companion banner interactions on audio. Platform-specific; corresponds to the 'engagements' optimization metric.",
                    "minimum": 0
                  },
                  "follows": {
                    "type": "number",
                    "description": "New followers, page likes, artist/podcast/channel subscribes attributed to this delivery.",
                    "minimum": 0
                  },
                  "saves": {
                    "type": "number",
                    "description": "Saves, bookmarks, playlist adds, pins attributed to this delivery.",
                    "minimum": 0
                  },
                  "profile_visits": {
                    "type": "number",
                    "description": "Visits to the brand's in-platform page (profile, artist page, channel, or storefront) attributed to this delivery. Does not include external website clicks.",
                    "minimum": 0
                  },
                  "engagement_rate": {
                    "type": "number",
                    "description": "Platform-specific engagement rate (0.0 to 1.0). Typically engagements/impressions, but definition varies by platform.",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "cost_per_click": {
                    "type": "number",
                    "description": "Cost per click (spend / clicks)",
                    "minimum": 0
                  },
                  "by_action_source": {
                    "type": "array",
                    "description": "Conversion metrics broken down by action source (website, app, in_store, etc.). Useful for omnichannel sellers where conversions occur across digital and physical channels.",
                    "items": {
                      "type": "object",
                      "properties": {
                        "action_source": {
                          "title": "Action Source",
                          "description": "Where the conversion occurred",
                          "type": "string",
                          "enum": [
                            "website",
                            "app",
                            "offline",
                            "phone_call",
                            "chat",
                            "email",
                            "in_store",
                            "system_generated",
                            "other"
                          ],
                          "enumDescriptions": {
                            "website": "Event occurred on a website",
                            "app": "Event occurred in a mobile or desktop app",
                            "offline": "Event occurred offline (imported data)",
                            "phone_call": "Event originated from a phone call",
                            "chat": "Event originated from a chat conversation",
                            "email": "Event originated from an email interaction",
                            "in_store": "Event occurred at a physical retail location",
                            "system_generated": "Event generated by an automated system",
                            "other": "Other source (specify in ext)"
                          }
                        },
                        "event_source_id": {
                          "type": "string",
                          "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                        },
                        "count": {
                          "type": "number",
                          "description": "Number of conversions from this action source",
                          "minimum": 0
                        },
                        "value": {
                          "type": "number",
                          "description": "Total monetary value of conversions from this action source",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "action_source",
                        "count"
                      ],
                      "additionalProperties": true
                    }
                  }
                },
                "additionalProperties": true
              },
              {
                "type": "object",
                "description": "Aggregate metrics for this media buy across all packages",
                "properties": {
                  "effective_rate": {
                    "type": "number",
                    "description": "Effective rate paid per unit based on pricing_model (e.g., actual CPM for 'cpm', actual cost per completed view for 'cpcv', actual cost per point for 'cpp')",
                    "minimum": 0
                  }
                },
                "required": [
                  "spend"
                ]
              }
            ]
          },
          "by_package": {
            "type": "array",
            "description": "Metrics broken down by package",
            "items": {
              "allOf": [
                {
                  "title": "Delivery Metrics",
                  "description": "Standard delivery metrics that can be reported at media buy, package, or creative level",
                  "type": "object",
                  "properties": {
                    "impressions": {
                      "type": "number",
                      "description": "Impressions delivered",
                      "minimum": 0
                    },
                    "spend": {
                      "type": "number",
                      "description": "Amount spent",
                      "minimum": 0
                    },
                    "clicks": {
                      "type": "number",
                      "description": "Total clicks",
                      "minimum": 0
                    },
                    "ctr": {
                      "type": "number",
                      "description": "Click-through rate (clicks/impressions)",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "views": {
                      "type": "number",
                      "description": "Views at threshold (for CPV)",
                      "minimum": 0
                    },
                    "completed_views": {
                      "type": "number",
                      "description": "Video/audio completions. When the package has a completed_views optimization goal with view_duration_seconds, completions are counted at that threshold rather than 100% completion.",
                      "minimum": 0
                    },
                    "completion_rate": {
                      "type": "number",
                      "description": "Completion rate (completed_views/impressions)",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "conversions": {
                      "type": "number",
                      "description": "Total conversions attributed to this delivery. When by_event_type is present, this equals the sum of all by_event_type[].count entries.",
                      "minimum": 0
                    },
                    "conversion_value": {
                      "type": "number",
                      "description": "Total monetary value of attributed conversions (in the reporting currency)",
                      "minimum": 0
                    },
                    "roas": {
                      "type": "number",
                      "description": "Return on ad spend (conversion_value / spend)",
                      "minimum": 0
                    },
                    "cost_per_acquisition": {
                      "type": "number",
                      "description": "Cost per conversion (spend / conversions)",
                      "minimum": 0
                    },
                    "new_to_brand_rate": {
                      "type": "number",
                      "description": "Fraction of conversions from first-time brand buyers (0 = none, 1 = all)",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "leads": {
                      "type": "number",
                      "description": "Leads generated (convenience alias for by_event_type where event_type='lead')",
                      "minimum": 0
                    },
                    "by_event_type": {
                      "type": "array",
                      "description": "Conversion metrics broken down by event type. Spend-derived metrics (ROAS, CPA) are only available at the package/totals level since spend cannot be attributed to individual event types.",
                      "items": {
                        "type": "object",
                        "properties": {
                          "event_type": {
                            "title": "Event Type",
                            "description": "The event type",
                            "type": "string",
                            "enum": [
                              "page_view",
                              "view_content",
                              "select_content",
                              "select_item",
                              "search",
                              "share",
                              "add_to_cart",
                              "remove_from_cart",
                              "viewed_cart",
                              "add_to_wishlist",
                              "initiate_checkout",
                              "add_payment_info",
                              "purchase",
                              "refund",
                              "lead",
                              "qualify_lead",
                              "close_convert_lead",
                              "disqualify_lead",
                              "complete_registration",
                              "subscribe",
                              "start_trial",
                              "app_install",
                              "app_launch",
                              "contact",
                              "schedule",
                              "donate",
                              "submit_application",
                              "custom"
                            ],
                            "enumDescriptions": {
                              "page_view": "User viewed a page",
                              "view_content": "User viewed specific content (product, article, etc.)",
                              "select_content": "User selected or clicked on content (article, video, etc.)",
                              "select_item": "User selected a specific product or item from a list",
                              "search": "User performed a search",
                              "share": "User shared content via social or messaging",
                              "add_to_cart": "User added an item to cart",
                              "remove_from_cart": "User removed an item from cart",
                              "viewed_cart": "User viewed their shopping cart",
                              "add_to_wishlist": "User added an item to a wishlist",
                              "initiate_checkout": "User started checkout process",
                              "add_payment_info": "User added payment information",
                              "purchase": "User completed a purchase",
                              "refund": "A purchase was fully or partially refunded (adjusts ROAS)",
                              "lead": "User expressed interest (form submission, signup, etc.)",
                              "qualify_lead": "Lead qualified by sales or scoring criteria",
                              "close_convert_lead": "Lead converted to a customer or closed deal",
                              "disqualify_lead": "Lead disqualified or marked as not viable",
                              "complete_registration": "User completed account registration",
                              "subscribe": "User subscribed to a service or newsletter",
                              "start_trial": "User started a free trial",
                              "app_install": "User installed an application",
                              "app_launch": "User launched an application",
                              "contact": "User initiated contact (call, message, etc.)",
                              "schedule": "User scheduled an appointment or event",
                              "donate": "User made a donation",
                              "submit_application": "User submitted an application (loan, job, etc.)",
                              "custom": "Custom event type (specify in custom_event_name)"
                            }
                          },
                          "event_source_id": {
                            "type": "string",
                            "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                          },
                          "count": {
                            "type": "number",
                            "description": "Number of events of this type",
                            "minimum": 0
                          },
                          "value": {
                            "type": "number",
                            "description": "Total monetary value of events of this type",
                            "minimum": 0
                          }
                        },
                        "required": [
                          "event_type",
                          "count"
                        ],
                        "additionalProperties": true
                      }
                    },
                    "grps": {
                      "type": "number",
                      "description": "Gross Rating Points delivered (for CPP)",
                      "minimum": 0
                    },
                    "reach": {
                      "type": "number",
                      "description": "Unique reach - units depend on measurement provider (e.g., individuals, households, devices, cookies). See delivery_measurement.provider for methodology.",
                      "minimum": 0
                    },
                    "frequency": {
                      "type": "number",
                      "description": "Average frequency per individual (typically measured over campaign duration, but can vary by measurement provider)",
                      "minimum": 0
                    },
                    "quartile_data": {
                      "type": "object",
                      "description": "Video quartile completion data",
                      "properties": {
                        "q1_views": {
                          "type": "number",
                          "description": "25% completion views",
                          "minimum": 0
                        },
                        "q2_views": {
                          "type": "number",
                          "description": "50% completion views",
                          "minimum": 0
                        },
                        "q3_views": {
                          "type": "number",
                          "description": "75% completion views",
                          "minimum": 0
                        },
                        "q4_views": {
                          "type": "number",
                          "description": "100% completion views",
                          "minimum": 0
                        }
                      }
                    },
                    "dooh_metrics": {
                      "type": "object",
                      "description": "DOOH-specific metrics (only included for DOOH campaigns)",
                      "properties": {
                        "loop_plays": {
                          "type": "integer",
                          "description": "Number of times ad played in rotation",
                          "minimum": 0
                        },
                        "screens_used": {
                          "type": "integer",
                          "description": "Number of unique screens displaying the ad",
                          "minimum": 0
                        },
                        "screen_time_seconds": {
                          "type": "integer",
                          "description": "Total display time in seconds",
                          "minimum": 0
                        },
                        "sov_achieved": {
                          "type": "number",
                          "description": "Actual share of voice delivered (0.0 to 1.0)",
                          "minimum": 0,
                          "maximum": 1
                        },
                        "calculation_notes": {
                          "type": "string",
                          "description": "Explanation of how DOOH impressions were calculated"
                        },
                        "venue_breakdown": {
                          "type": "array",
                          "description": "Per-venue performance breakdown",
                          "items": {
                            "type": "object",
                            "properties": {
                              "venue_id": {
                                "type": "string",
                                "description": "Venue identifier"
                              },
                              "venue_name": {
                                "type": "string",
                                "description": "Human-readable venue name"
                              },
                              "venue_type": {
                                "type": "string",
                                "description": "Venue type (e.g., 'airport', 'transit', 'retail', 'billboard')"
                              },
                              "impressions": {
                                "type": "integer",
                                "description": "Impressions delivered at this venue",
                                "minimum": 0
                              },
                              "loop_plays": {
                                "type": "integer",
                                "description": "Loop plays at this venue",
                                "minimum": 0
                              },
                              "screens_used": {
                                "type": "integer",
                                "description": "Number of screens used at this venue",
                                "minimum": 0
                              }
                            },
                            "required": [
                              "venue_id",
                              "impressions"
                            ],
                            "additionalProperties": true
                          }
                        }
                      },
                      "additionalProperties": true
                    },
                    "viewability": {
                      "type": "object",
                      "description": "Viewability metrics. Viewable rate should be calculated as viewable_impressions / measurable_impressions (not total impressions), since some environments cannot measure viewability.",
                      "properties": {
                        "measurable_impressions": {
                          "type": "number",
                          "description": "Impressions where viewability could be measured. Excludes environments without measurement capability (e.g., non-Intersection Observer browsers, certain app environments).",
                          "minimum": 0
                        },
                        "viewable_impressions": {
                          "type": "number",
                          "description": "Impressions that met the viewability threshold defined by the measurement standard.",
                          "minimum": 0
                        },
                        "viewable_rate": {
                          "type": "number",
                          "description": "Viewable impression rate (viewable_impressions / measurable_impressions). Range 0.0 to 1.0.",
                          "minimum": 0,
                          "maximum": 1
                        },
                        "standard": {
                          "type": "string",
                          "enum": [
                            "mrc",
                            "groupm"
                          ],
                          "description": "Viewability measurement standard. 'mrc': 50% of pixels in view for 1 second (display) or 2 seconds (video), per MRC/IAB guidelines. 'groupm': 100% of pixels in view for the same durations. These are materially different thresholds and should not be compared across standards."
                        }
                      },
                      "additionalProperties": true
                    },
                    "engagements": {
                      "type": "number",
                      "description": "Total engagements — direct interactions with the ad beyond viewing. Includes social reactions/comments/shares, story/unit opens, interactive overlay taps on CTV, companion banner interactions on audio. Platform-specific; corresponds to the 'engagements' optimization metric.",
                      "minimum": 0
                    },
                    "follows": {
                      "type": "number",
                      "description": "New followers, page likes, artist/podcast/channel subscribes attributed to this delivery.",
                      "minimum": 0
                    },
                    "saves": {
                      "type": "number",
                      "description": "Saves, bookmarks, playlist adds, pins attributed to this delivery.",
                      "minimum": 0
                    },
                    "profile_visits": {
                      "type": "number",
                      "description": "Visits to the brand's in-platform page (profile, artist page, channel, or storefront) attributed to this delivery. Does not include external website clicks.",
                      "minimum": 0
                    },
                    "engagement_rate": {
                      "type": "number",
                      "description": "Platform-specific engagement rate (0.0 to 1.0). Typically engagements/impressions, but definition varies by platform.",
                      "minimum": 0,
                      "maximum": 1
                    },
                    "cost_per_click": {
                      "type": "number",
                      "description": "Cost per click (spend / clicks)",
                      "minimum": 0
                    },
                    "by_action_source": {
                      "type": "array",
                      "description": "Conversion metrics broken down by action source (website, app, in_store, etc.). Useful for omnichannel sellers where conversions occur across digital and physical channels.",
                      "items": {
                        "type": "object",
                        "properties": {
                          "action_source": {
                            "title": "Action Source",
                            "description": "Where the conversion occurred",
                            "type": "string",
                            "enum": [
                              "website",
                              "app",
                              "offline",
                              "phone_call",
                              "chat",
                              "email",
                              "in_store",
                              "system_generated",
                              "other"
                            ],
                            "enumDescriptions": {
                              "website": "Event occurred on a website",
                              "app": "Event occurred in a mobile or desktop app",
                              "offline": "Event occurred offline (imported data)",
                              "phone_call": "Event originated from a phone call",
                              "chat": "Event originated from a chat conversation",
                              "email": "Event originated from an email interaction",
                              "in_store": "Event occurred at a physical retail location",
                              "system_generated": "Event generated by an automated system",
                              "other": "Other source (specify in ext)"
                            }
                          },
                          "event_source_id": {
                            "type": "string",
                            "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                          },
                          "count": {
                            "type": "number",
                            "description": "Number of conversions from this action source",
                            "minimum": 0
                          },
                          "value": {
                            "type": "number",
                            "description": "Total monetary value of conversions from this action source",
                            "minimum": 0
                          }
                        },
                        "required": [
                          "action_source",
                          "count"
                        ],
                        "additionalProperties": true
                      }
                    }
                  },
                  "additionalProperties": true
                },
                {
                  "type": "object",
                  "properties": {
                    "package_id": {
                      "type": "string",
                      "description": "Publisher's package identifier"
                    },
                    "buyer_ref": {
                      "type": "string",
                      "description": "Buyer's reference identifier for this package"
                    },
                    "pacing_index": {
                      "type": "number",
                      "description": "Delivery pace (1.0 = on track, <1.0 = behind, >1.0 = ahead)",
                      "minimum": 0
                    },
                    "pricing_model": {
                      "title": "Pricing Model",
                      "description": "The pricing model used for this package (e.g., cpm, cpcv, cpp). Indicates how the package is billed and which metrics are most relevant for optimization.",
                      "type": "string",
                      "enum": [
                        "cpm",
                        "vcpm",
                        "cpc",
                        "cpcv",
                        "cpv",
                        "cpp",
                        "cpa",
                        "flat_rate",
                        "time"
                      ],
                      "enumDescriptions": {
                        "cpm": "Cost Per Mille - cost per 1,000 impressions",
                        "vcpm": "Viewable Cost Per Mille - cost per 1,000 viewable impressions (MRC standard)",
                        "cpc": "Cost Per Click - cost per click on the ad",
                        "cpcv": "Cost Per Completed View - cost per 100% video/audio completion",
                        "cpv": "Cost Per View - cost per view at publisher-defined threshold (e.g., 50% completion)",
                        "cpp": "Cost Per Point - cost per Gross Rating Point or Target Rating Point (TV/audio)",
                        "cpa": "Cost Per Acquisition - cost per conversion event (purchase, lead, signup, etc.)",
                        "flat_rate": "Flat Rate - fixed cost regardless of delivery volume (sponsorships, takeovers)",
                        "time": "Time - cost per time unit (hour, day, week, or month) that scales with campaign duration"
                      }
                    },
                    "rate": {
                      "type": "number",
                      "description": "The pricing rate for this package in the specified currency. For fixed-rate pricing, this is the agreed rate (e.g., CPM rate of 12.50 means $12.50 per 1,000 impressions). For auction-based pricing, this represents the effective rate based on actual delivery.",
                      "minimum": 0
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code (e.g., USD, EUR, GBP) for this package's pricing. Indicates the currency in which the rate and spend values are denominated. Different packages can use different currencies when supported by the publisher.",
                      "pattern": "^[A-Z]{3}$"
                    },
                    "delivery_status": {
                      "type": "string",
                      "description": "System-reported operational state of this package. Reflects actual delivery state independent of buyer pause control.",
                      "enum": [
                        "delivering",
                        "completed",
                        "budget_exhausted",
                        "flight_ended",
                        "goal_met"
                      ]
                    },
                    "paused": {
                      "type": "boolean",
                      "description": "Whether this package is currently paused by the buyer"
                    },
                    "by_catalog_item": {
                      "type": "array",
                      "description": "Delivery by catalog item within this package. Available for catalog-driven packages when the seller supports item-level reporting.",
                      "items": {
                        "allOf": [
                          {
                            "title": "Delivery Metrics",
                            "description": "Standard delivery metrics that can be reported at media buy, package, or creative level",
                            "type": "object",
                            "properties": {
                              "impressions": {
                                "type": "number",
                                "description": "Impressions delivered",
                                "minimum": 0
                              },
                              "spend": {
                                "type": "number",
                                "description": "Amount spent",
                                "minimum": 0
                              },
                              "clicks": {
                                "type": "number",
                                "description": "Total clicks",
                                "minimum": 0
                              },
                              "ctr": {
                                "type": "number",
                                "description": "Click-through rate (clicks/impressions)",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "views": {
                                "type": "number",
                                "description": "Views at threshold (for CPV)",
                                "minimum": 0
                              },
                              "completed_views": {
                                "type": "number",
                                "description": "Video/audio completions. When the package has a completed_views optimization goal with view_duration_seconds, completions are counted at that threshold rather than 100% completion.",
                                "minimum": 0
                              },
                              "completion_rate": {
                                "type": "number",
                                "description": "Completion rate (completed_views/impressions)",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "conversions": {
                                "type": "number",
                                "description": "Total conversions attributed to this delivery. When by_event_type is present, this equals the sum of all by_event_type[].count entries.",
                                "minimum": 0
                              },
                              "conversion_value": {
                                "type": "number",
                                "description": "Total monetary value of attributed conversions (in the reporting currency)",
                                "minimum": 0
                              },
                              "roas": {
                                "type": "number",
                                "description": "Return on ad spend (conversion_value / spend)",
                                "minimum": 0
                              },
                              "cost_per_acquisition": {
                                "type": "number",
                                "description": "Cost per conversion (spend / conversions)",
                                "minimum": 0
                              },
                              "new_to_brand_rate": {
                                "type": "number",
                                "description": "Fraction of conversions from first-time brand buyers (0 = none, 1 = all)",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "leads": {
                                "type": "number",
                                "description": "Leads generated (convenience alias for by_event_type where event_type='lead')",
                                "minimum": 0
                              },
                              "by_event_type": {
                                "type": "array",
                                "description": "Conversion metrics broken down by event type. Spend-derived metrics (ROAS, CPA) are only available at the package/totals level since spend cannot be attributed to individual event types.",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "event_type": {
                                      "title": "Event Type",
                                      "description": "The event type",
                                      "type": "string",
                                      "enum": [
                                        "page_view",
                                        "view_content",
                                        "select_content",
                                        "select_item",
                                        "search",
                                        "share",
                                        "add_to_cart",
                                        "remove_from_cart",
                                        "viewed_cart",
                                        "add_to_wishlist",
                                        "initiate_checkout",
                                        "add_payment_info",
                                        "purchase",
                                        "refund",
                                        "lead",
                                        "qualify_lead",
                                        "close_convert_lead",
                                        "disqualify_lead",
                                        "complete_registration",
                                        "subscribe",
                                        "start_trial",
                                        "app_install",
                                        "app_launch",
                                        "contact",
                                        "schedule",
                                        "donate",
                                        "submit_application",
                                        "custom"
                                      ],
                                      "enumDescriptions": {
                                        "page_view": "User viewed a page",
                                        "view_content": "User viewed specific content (product, article, etc.)",
                                        "select_content": "User selected or clicked on content (article, video, etc.)",
                                        "select_item": "User selected a specific product or item from a list",
                                        "search": "User performed a search",
                                        "share": "User shared content via social or messaging",
                                        "add_to_cart": "User added an item to cart",
                                        "remove_from_cart": "User removed an item from cart",
                                        "viewed_cart": "User viewed their shopping cart",
                                        "add_to_wishlist": "User added an item to a wishlist",
                                        "initiate_checkout": "User started checkout process",
                                        "add_payment_info": "User added payment information",
                                        "purchase": "User completed a purchase",
                                        "refund": "A purchase was fully or partially refunded (adjusts ROAS)",
                                        "lead": "User expressed interest (form submission, signup, etc.)",
                                        "qualify_lead": "Lead qualified by sales or scoring criteria",
                                        "close_convert_lead": "Lead converted to a customer or closed deal",
                                        "disqualify_lead": "Lead disqualified or marked as not viable",
                                        "complete_registration": "User completed account registration",
                                        "subscribe": "User subscribed to a service or newsletter",
                                        "start_trial": "User started a free trial",
                                        "app_install": "User installed an application",
                                        "app_launch": "User launched an application",
                                        "contact": "User initiated contact (call, message, etc.)",
                                        "schedule": "User scheduled an appointment or event",
                                        "donate": "User made a donation",
                                        "submit_application": "User submitted an application (loan, job, etc.)",
                                        "custom": "Custom event type (specify in custom_event_name)"
                                      }
                                    },
                                    "event_source_id": {
                                      "type": "string",
                                      "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                                    },
                                    "count": {
                                      "type": "number",
                                      "description": "Number of events of this type",
                                      "minimum": 0
                                    },
                                    "value": {
                                      "type": "number",
                                      "description": "Total monetary value of events of this type",
                                      "minimum": 0
                                    }
                                  },
                                  "required": [
                                    "event_type",
                                    "count"
                                  ],
                                  "additionalProperties": true
                                }
                              },
                              "grps": {
                                "type": "number",
                                "description": "Gross Rating Points delivered (for CPP)",
                                "minimum": 0
                              },
                              "reach": {
                                "type": "number",
                                "description": "Unique reach - units depend on measurement provider (e.g., individuals, households, devices, cookies). See delivery_measurement.provider for methodology.",
                                "minimum": 0
                              },
                              "frequency": {
                                "type": "number",
                                "description": "Average frequency per individual (typically measured over campaign duration, but can vary by measurement provider)",
                                "minimum": 0
                              },
                              "quartile_data": {
                                "type": "object",
                                "description": "Video quartile completion data",
                                "properties": {
                                  "q1_views": {
                                    "type": "number",
                                    "description": "25% completion views",
                                    "minimum": 0
                                  },
                                  "q2_views": {
                                    "type": "number",
                                    "description": "50% completion views",
                                    "minimum": 0
                                  },
                                  "q3_views": {
                                    "type": "number",
                                    "description": "75% completion views",
                                    "minimum": 0
                                  },
                                  "q4_views": {
                                    "type": "number",
                                    "description": "100% completion views",
                                    "minimum": 0
                                  }
                                }
                              },
                              "dooh_metrics": {
                                "type": "object",
                                "description": "DOOH-specific metrics (only included for DOOH campaigns)",
                                "properties": {
                                  "loop_plays": {
                                    "type": "integer",
                                    "description": "Number of times ad played in rotation",
                                    "minimum": 0
                                  },
                                  "screens_used": {
                                    "type": "integer",
                                    "description": "Number of unique screens displaying the ad",
                                    "minimum": 0
                                  },
                                  "screen_time_seconds": {
                                    "type": "integer",
                                    "description": "Total display time in seconds",
                                    "minimum": 0
                                  },
                                  "sov_achieved": {
                                    "type": "number",
                                    "description": "Actual share of voice delivered (0.0 to 1.0)",
                                    "minimum": 0,
                                    "maximum": 1
                                  },
                                  "calculation_notes": {
                                    "type": "string",
                                    "description": "Explanation of how DOOH impressions were calculated"
                                  },
                                  "venue_breakdown": {
                                    "type": "array",
                                    "description": "Per-venue performance breakdown",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "venue_id": {
                                          "type": "string",
                                          "description": "Venue identifier"
                                        },
                                        "venue_name": {
                                          "type": "string",
                                          "description": "Human-readable venue name"
                                        },
                                        "venue_type": {
                                          "type": "string",
                                          "description": "Venue type (e.g., 'airport', 'transit', 'retail', 'billboard')"
                                        },
                                        "impressions": {
                                          "type": "integer",
                                          "description": "Impressions delivered at this venue",
                                          "minimum": 0
                                        },
                                        "loop_plays": {
                                          "type": "integer",
                                          "description": "Loop plays at this venue",
                                          "minimum": 0
                                        },
                                        "screens_used": {
                                          "type": "integer",
                                          "description": "Number of screens used at this venue",
                                          "minimum": 0
                                        }
                                      },
                                      "required": [
                                        "venue_id",
                                        "impressions"
                                      ],
                                      "additionalProperties": true
                                    }
                                  }
                                },
                                "additionalProperties": true
                              },
                              "viewability": {
                                "type": "object",
                                "description": "Viewability metrics. Viewable rate should be calculated as viewable_impressions / measurable_impressions (not total impressions), since some environments cannot measure viewability.",
                                "properties": {
                                  "measurable_impressions": {
                                    "type": "number",
                                    "description": "Impressions where viewability could be measured. Excludes environments without measurement capability (e.g., non-Intersection Observer browsers, certain app environments).",
                                    "minimum": 0
                                  },
                                  "viewable_impressions": {
                                    "type": "number",
                                    "description": "Impressions that met the viewability threshold defined by the measurement standard.",
                                    "minimum": 0
                                  },
                                  "viewable_rate": {
                                    "type": "number",
                                    "description": "Viewable impression rate (viewable_impressions / measurable_impressions). Range 0.0 to 1.0.",
                                    "minimum": 0,
                                    "maximum": 1
                                  },
                                  "standard": {
                                    "type": "string",
                                    "enum": [
                                      "mrc",
                                      "groupm"
                                    ],
                                    "description": "Viewability measurement standard. 'mrc': 50% of pixels in view for 1 second (display) or 2 seconds (video), per MRC/IAB guidelines. 'groupm': 100% of pixels in view for the same durations. These are materially different thresholds and should not be compared across standards."
                                  }
                                },
                                "additionalProperties": true
                              },
                              "engagements": {
                                "type": "number",
                                "description": "Total engagements — direct interactions with the ad beyond viewing. Includes social reactions/comments/shares, story/unit opens, interactive overlay taps on CTV, companion banner interactions on audio. Platform-specific; corresponds to the 'engagements' optimization metric.",
                                "minimum": 0
                              },
                              "follows": {
                                "type": "number",
                                "description": "New followers, page likes, artist/podcast/channel subscribes attributed to this delivery.",
                                "minimum": 0
                              },
                              "saves": {
                                "type": "number",
                                "description": "Saves, bookmarks, playlist adds, pins attributed to this delivery.",
                                "minimum": 0
                              },
                              "profile_visits": {
                                "type": "number",
                                "description": "Visits to the brand's in-platform page (profile, artist page, channel, or storefront) attributed to this delivery. Does not include external website clicks.",
                                "minimum": 0
                              },
                              "engagement_rate": {
                                "type": "number",
                                "description": "Platform-specific engagement rate (0.0 to 1.0). Typically engagements/impressions, but definition varies by platform.",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "cost_per_click": {
                                "type": "number",
                                "description": "Cost per click (spend / clicks)",
                                "minimum": 0
                              },
                              "by_action_source": {
                                "type": "array",
                                "description": "Conversion metrics broken down by action source (website, app, in_store, etc.). Useful for omnichannel sellers where conversions occur across digital and physical channels.",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "action_source": {
                                      "title": "Action Source",
                                      "description": "Where the conversion occurred",
                                      "type": "string",
                                      "enum": [
                                        "website",
                                        "app",
                                        "offline",
                                        "phone_call",
                                        "chat",
                                        "email",
                                        "in_store",
                                        "system_generated",
                                        "other"
                                      ],
                                      "enumDescriptions": {
                                        "website": "Event occurred on a website",
                                        "app": "Event occurred in a mobile or desktop app",
                                        "offline": "Event occurred offline (imported data)",
                                        "phone_call": "Event originated from a phone call",
                                        "chat": "Event originated from a chat conversation",
                                        "email": "Event originated from an email interaction",
                                        "in_store": "Event occurred at a physical retail location",
                                        "system_generated": "Event generated by an automated system",
                                        "other": "Other source (specify in ext)"
                                      }
                                    },
                                    "event_source_id": {
                                      "type": "string",
                                      "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                                    },
                                    "count": {
                                      "type": "number",
                                      "description": "Number of conversions from this action source",
                                      "minimum": 0
                                    },
                                    "value": {
                                      "type": "number",
                                      "description": "Total monetary value of conversions from this action source",
                                      "minimum": 0
                                    }
                                  },
                                  "required": [
                                    "action_source",
                                    "count"
                                  ],
                                  "additionalProperties": true
                                }
                              }
                            },
                            "additionalProperties": true
                          },
                          {
                            "type": "object",
                            "properties": {
                              "content_id": {
                                "type": "string",
                                "description": "Catalog item identifier (e.g., SKU, GTIN, job_id, offering_id)"
                              },
                              "content_id_type": {
                                "title": "Content ID Type",
                                "description": "Identifier type for this content_id",
                                "type": "string",
                                "enum": [
                                  "sku",
                                  "gtin",
                                  "offering_id",
                                  "job_id",
                                  "hotel_id",
                                  "flight_id",
                                  "vehicle_id",
                                  "listing_id",
                                  "store_id",
                                  "program_id",
                                  "destination_id",
                                  "app_id"
                                ]
                              }
                            },
                            "required": [
                              "content_id",
                              "impressions",
                              "spend"
                            ]
                          }
                        ]
                      }
                    },
                    "by_creative": {
                      "type": "array",
                      "description": "Metrics broken down by creative within this package. Available when the seller supports creative-level reporting.",
                      "items": {
                        "allOf": [
                          {
                            "title": "Delivery Metrics",
                            "description": "Standard delivery metrics that can be reported at media buy, package, or creative level",
                            "type": "object",
                            "properties": {
                              "impressions": {
                                "type": "number",
                                "description": "Impressions delivered",
                                "minimum": 0
                              },
                              "spend": {
                                "type": "number",
                                "description": "Amount spent",
                                "minimum": 0
                              },
                              "clicks": {
                                "type": "number",
                                "description": "Total clicks",
                                "minimum": 0
                              },
                              "ctr": {
                                "type": "number",
                                "description": "Click-through rate (clicks/impressions)",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "views": {
                                "type": "number",
                                "description": "Views at threshold (for CPV)",
                                "minimum": 0
                              },
                              "completed_views": {
                                "type": "number",
                                "description": "Video/audio completions. When the package has a completed_views optimization goal with view_duration_seconds, completions are counted at that threshold rather than 100% completion.",
                                "minimum": 0
                              },
                              "completion_rate": {
                                "type": "number",
                                "description": "Completion rate (completed_views/impressions)",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "conversions": {
                                "type": "number",
                                "description": "Total conversions attributed to this delivery. When by_event_type is present, this equals the sum of all by_event_type[].count entries.",
                                "minimum": 0
                              },
                              "conversion_value": {
                                "type": "number",
                                "description": "Total monetary value of attributed conversions (in the reporting currency)",
                                "minimum": 0
                              },
                              "roas": {
                                "type": "number",
                                "description": "Return on ad spend (conversion_value / spend)",
                                "minimum": 0
                              },
                              "cost_per_acquisition": {
                                "type": "number",
                                "description": "Cost per conversion (spend / conversions)",
                                "minimum": 0
                              },
                              "new_to_brand_rate": {
                                "type": "number",
                                "description": "Fraction of conversions from first-time brand buyers (0 = none, 1 = all)",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "leads": {
                                "type": "number",
                                "description": "Leads generated (convenience alias for by_event_type where event_type='lead')",
                                "minimum": 0
                              },
                              "by_event_type": {
                                "type": "array",
                                "description": "Conversion metrics broken down by event type. Spend-derived metrics (ROAS, CPA) are only available at the package/totals level since spend cannot be attributed to individual event types.",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "event_type": {
                                      "title": "Event Type",
                                      "description": "The event type",
                                      "type": "string",
                                      "enum": [
                                        "page_view",
                                        "view_content",
                                        "select_content",
                                        "select_item",
                                        "search",
                                        "share",
                                        "add_to_cart",
                                        "remove_from_cart",
                                        "viewed_cart",
                                        "add_to_wishlist",
                                        "initiate_checkout",
                                        "add_payment_info",
                                        "purchase",
                                        "refund",
                                        "lead",
                                        "qualify_lead",
                                        "close_convert_lead",
                                        "disqualify_lead",
                                        "complete_registration",
                                        "subscribe",
                                        "start_trial",
                                        "app_install",
                                        "app_launch",
                                        "contact",
                                        "schedule",
                                        "donate",
                                        "submit_application",
                                        "custom"
                                      ],
                                      "enumDescriptions": {
                                        "page_view": "User viewed a page",
                                        "view_content": "User viewed specific content (product, article, etc.)",
                                        "select_content": "User selected or clicked on content (article, video, etc.)",
                                        "select_item": "User selected a specific product or item from a list",
                                        "search": "User performed a search",
                                        "share": "User shared content via social or messaging",
                                        "add_to_cart": "User added an item to cart",
                                        "remove_from_cart": "User removed an item from cart",
                                        "viewed_cart": "User viewed their shopping cart",
                                        "add_to_wishlist": "User added an item to a wishlist",
                                        "initiate_checkout": "User started checkout process",
                                        "add_payment_info": "User added payment information",
                                        "purchase": "User completed a purchase",
                                        "refund": "A purchase was fully or partially refunded (adjusts ROAS)",
                                        "lead": "User expressed interest (form submission, signup, etc.)",
                                        "qualify_lead": "Lead qualified by sales or scoring criteria",
                                        "close_convert_lead": "Lead converted to a customer or closed deal",
                                        "disqualify_lead": "Lead disqualified or marked as not viable",
                                        "complete_registration": "User completed account registration",
                                        "subscribe": "User subscribed to a service or newsletter",
                                        "start_trial": "User started a free trial",
                                        "app_install": "User installed an application",
                                        "app_launch": "User launched an application",
                                        "contact": "User initiated contact (call, message, etc.)",
                                        "schedule": "User scheduled an appointment or event",
                                        "donate": "User made a donation",
                                        "submit_application": "User submitted an application (loan, job, etc.)",
                                        "custom": "Custom event type (specify in custom_event_name)"
                                      }
                                    },
                                    "event_source_id": {
                                      "type": "string",
                                      "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                                    },
                                    "count": {
                                      "type": "number",
                                      "description": "Number of events of this type",
                                      "minimum": 0
                                    },
                                    "value": {
                                      "type": "number",
                                      "description": "Total monetary value of events of this type",
                                      "minimum": 0
                                    }
                                  },
                                  "required": [
                                    "event_type",
                                    "count"
                                  ],
                                  "additionalProperties": true
                                }
                              },
                              "grps": {
                                "type": "number",
                                "description": "Gross Rating Points delivered (for CPP)",
                                "minimum": 0
                              },
                              "reach": {
                                "type": "number",
                                "description": "Unique reach - units depend on measurement provider (e.g., individuals, households, devices, cookies). See delivery_measurement.provider for methodology.",
                                "minimum": 0
                              },
                              "frequency": {
                                "type": "number",
                                "description": "Average frequency per individual (typically measured over campaign duration, but can vary by measurement provider)",
                                "minimum": 0
                              },
                              "quartile_data": {
                                "type": "object",
                                "description": "Video quartile completion data",
                                "properties": {
                                  "q1_views": {
                                    "type": "number",
                                    "description": "25% completion views",
                                    "minimum": 0
                                  },
                                  "q2_views": {
                                    "type": "number",
                                    "description": "50% completion views",
                                    "minimum": 0
                                  },
                                  "q3_views": {
                                    "type": "number",
                                    "description": "75% completion views",
                                    "minimum": 0
                                  },
                                  "q4_views": {
                                    "type": "number",
                                    "description": "100% completion views",
                                    "minimum": 0
                                  }
                                }
                              },
                              "dooh_metrics": {
                                "type": "object",
                                "description": "DOOH-specific metrics (only included for DOOH campaigns)",
                                "properties": {
                                  "loop_plays": {
                                    "type": "integer",
                                    "description": "Number of times ad played in rotation",
                                    "minimum": 0
                                  },
                                  "screens_used": {
                                    "type": "integer",
                                    "description": "Number of unique screens displaying the ad",
                                    "minimum": 0
                                  },
                                  "screen_time_seconds": {
                                    "type": "integer",
                                    "description": "Total display time in seconds",
                                    "minimum": 0
                                  },
                                  "sov_achieved": {
                                    "type": "number",
                                    "description": "Actual share of voice delivered (0.0 to 1.0)",
                                    "minimum": 0,
                                    "maximum": 1
                                  },
                                  "calculation_notes": {
                                    "type": "string",
                                    "description": "Explanation of how DOOH impressions were calculated"
                                  },
                                  "venue_breakdown": {
                                    "type": "array",
                                    "description": "Per-venue performance breakdown",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "venue_id": {
                                          "type": "string",
                                          "description": "Venue identifier"
                                        },
                                        "venue_name": {
                                          "type": "string",
                                          "description": "Human-readable venue name"
                                        },
                                        "venue_type": {
                                          "type": "string",
                                          "description": "Venue type (e.g., 'airport', 'transit', 'retail', 'billboard')"
                                        },
                                        "impressions": {
                                          "type": "integer",
                                          "description": "Impressions delivered at this venue",
                                          "minimum": 0
                                        },
                                        "loop_plays": {
                                          "type": "integer",
                                          "description": "Loop plays at this venue",
                                          "minimum": 0
                                        },
                                        "screens_used": {
                                          "type": "integer",
                                          "description": "Number of screens used at this venue",
                                          "minimum": 0
                                        }
                                      },
                                      "required": [
                                        "venue_id",
                                        "impressions"
                                      ],
                                      "additionalProperties": true
                                    }
                                  }
                                },
                                "additionalProperties": true
                              },
                              "viewability": {
                                "type": "object",
                                "description": "Viewability metrics. Viewable rate should be calculated as viewable_impressions / measurable_impressions (not total impressions), since some environments cannot measure viewability.",
                                "properties": {
                                  "measurable_impressions": {
                                    "type": "number",
                                    "description": "Impressions where viewability could be measured. Excludes environments without measurement capability (e.g., non-Intersection Observer browsers, certain app environments).",
                                    "minimum": 0
                                  },
                                  "viewable_impressions": {
                                    "type": "number",
                                    "description": "Impressions that met the viewability threshold defined by the measurement standard.",
                                    "minimum": 0
                                  },
                                  "viewable_rate": {
                                    "type": "number",
                                    "description": "Viewable impression rate (viewable_impressions / measurable_impressions). Range 0.0 to 1.0.",
                                    "minimum": 0,
                                    "maximum": 1
                                  },
                                  "standard": {
                                    "type": "string",
                                    "enum": [
                                      "mrc",
                                      "groupm"
                                    ],
                                    "description": "Viewability measurement standard. 'mrc': 50% of pixels in view for 1 second (display) or 2 seconds (video), per MRC/IAB guidelines. 'groupm': 100% of pixels in view for the same durations. These are materially different thresholds and should not be compared across standards."
                                  }
                                },
                                "additionalProperties": true
                              },
                              "engagements": {
                                "type": "number",
                                "description": "Total engagements — direct interactions with the ad beyond viewing. Includes social reactions/comments/shares, story/unit opens, interactive overlay taps on CTV, companion banner interactions on audio. Platform-specific; corresponds to the 'engagements' optimization metric.",
                                "minimum": 0
                              },
                              "follows": {
                                "type": "number",
                                "description": "New followers, page likes, artist/podcast/channel subscribes attributed to this delivery.",
                                "minimum": 0
                              },
                              "saves": {
                                "type": "number",
                                "description": "Saves, bookmarks, playlist adds, pins attributed to this delivery.",
                                "minimum": 0
                              },
                              "profile_visits": {
                                "type": "number",
                                "description": "Visits to the brand's in-platform page (profile, artist page, channel, or storefront) attributed to this delivery. Does not include external website clicks.",
                                "minimum": 0
                              },
                              "engagement_rate": {
                                "type": "number",
                                "description": "Platform-specific engagement rate (0.0 to 1.0). Typically engagements/impressions, but definition varies by platform.",
                                "minimum": 0,
                                "maximum": 1
                              },
                              "cost_per_click": {
                                "type": "number",
                                "description": "Cost per click (spend / clicks)",
                                "minimum": 0
                              },
                              "by_action_source": {
                                "type": "array",
                                "description": "Conversion metrics broken down by action source (website, app, in_store, etc.). Useful for omnichannel sellers where conversions occur across digital and physical channels.",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "action_source": {
                                      "title": "Action Source",
                                      "description": "Where the conversion occurred",
                                      "type": "string",
                                      "enum": [
                                        "website",
                                        "app",
                                        "offline",
                                        "phone_call",
                                        "chat",
                                        "email",
                                        "in_store",
                                        "system_generated",
                                        "other"
                                      ],
                                      "enumDescriptions": {
                                        "website": "Event occurred on a website",
                                        "app": "Event occurred in a mobile or desktop app",
                                        "offline": "Event occurred offline (imported data)",
                                        "phone_call": "Event originated from a phone call",
                                        "chat": "Event originated from a chat conversation",
                                        "email": "Event originated from an email interaction",
                                        "in_store": "Event occurred at a physical retail location",
                                        "system_generated": "Event generated by an automated system",
                                        "other": "Other source (specify in ext)"
                                      }
                                    },
                                    "event_source_id": {
                                      "type": "string",
                                      "description": "Event source that produced these conversions (for disambiguation when multiple event sources are configured)"
                                    },
                                    "count": {
                                      "type": "number",
                                      "description": "Number of conversions from this action source",
                                      "minimum": 0
                                    },
                                    "value": {
                                      "type": "number",
                                      "description": "Total monetary value of conversions from this action source",
                                      "minimum": 0
                                    }
                                  },
                                  "required": [
                                    "action_source",
                                    "count"
                                  ],
                                  "additionalProperties": true
                                }
                              }
                            },
                            "additionalProperties": true
                          },
                          {
                            "type": "object",
                            "properties": {
                              "creative_id": {
                                "type": "string",
                                "description": "Creative identifier matching the creative assignment"
                              },
                              "weight": {
                                "type": "number",
                                "description": "Observed delivery share for this creative within the package during the reporting period, expressed as a percentage (0-100). Reflects actual delivery distribution, not a configured setting.",
                                "minimum": 0,
                                "maximum": 100
                              }
                            },
                            "required": [
                              "creative_id",
                              "impressions",
                              "spend"
                            ]
                          }
                        ]
                      }
                    }
                  },
                  "required": [
                    "package_id",
                    "spend",
                    "pricing_model",
                    "rate",
                    "currency"
                  ]
                }
              ]
            }
          },
          "daily_breakdown": {
            "type": "array",
            "description": "Day-by-day delivery",
            "items": {
              "type": "object",
              "properties": {
                "date": {
                  "type": "string",
                  "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
                  "description": "Date (YYYY-MM-DD)"
                },
                "impressions": {
                  "type": "number",
                  "description": "Daily impressions",
                  "minimum": 0
                },
                "spend": {
                  "type": "number",
                  "description": "Daily spend",
                  "minimum": 0
                },
                "conversions": {
                  "type": "number",
                  "description": "Daily conversions",
                  "minimum": 0
                },
                "conversion_value": {
                  "type": "number",
                  "description": "Daily conversion value",
                  "minimum": 0
                },
                "roas": {
                  "type": "number",
                  "description": "Daily return on ad spend (conversion_value / spend)",
                  "minimum": 0
                },
                "new_to_brand_rate": {
                  "type": "number",
                  "description": "Daily fraction of conversions from first-time brand buyers (0 = none, 1 = all)",
                  "minimum": 0,
                  "maximum": 1
                }
              },
              "required": [
                "date",
                "impressions",
                "spend"
              ],
              "additionalProperties": true
            }
          }
        },
        "required": [
          "media_buy_id",
          "status",
          "totals",
          "by_package"
        ],
        "additionalProperties": true
      }
    },
    "errors": {
      "type": "array",
      "description": "Task-specific errors and warnings (e.g., missing delivery data, reporting platform issues)",
      "items": {
        "title": "Error",
        "description": "Standard error structure for task-specific errors and warnings",
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code for programmatic handling"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message"
          },
          "field": {
            "type": "string",
            "description": "Field path associated with the error (e.g., 'packages[0].targeting')"
          },
          "suggestion": {
            "type": "string",
            "description": "Suggested fix for the error"
          },
          "retry_after": {
            "type": "number",
            "description": "Seconds to wait before retrying the operation",
            "minimum": 0
          },
          "details": {
            "type": "object",
            "description": "Additional task-specific error details",
            "additionalProperties": true
          }
        },
        "required": [
          "code",
          "message"
        ],
        "additionalProperties": true
      }
    },
    "sandbox": {
      "type": "boolean",
      "description": "When true, this response contains simulated data from sandbox mode."
    },
    "context": {
      "title": "Context Object",
      "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
      "type": "object",
      "additionalProperties": true
    },
    "ext": {
      "title": "Extension Object",
      "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
      "type": "object",
      "additionalProperties": true
    }
  },
  "required": [
    "reporting_period",
    "currency",
    "media_buy_deliveries"
  ],
  "additionalProperties": true,
  "_bundled": {
    "generatedAt": "2026-02-26T12:28:33.819Z",
    "note": "This is a bundled schema with all $ref resolved inline. For the modular version with references, use the parent directory."
  }
}