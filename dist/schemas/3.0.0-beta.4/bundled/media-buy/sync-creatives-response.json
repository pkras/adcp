{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-beta.4/bundled/media-buy/sync-creatives-response.json",
  "title": "Sync Creatives Response",
  "description": "Response from creative sync operation. Returns either per-creative results (best-effort processing) OR operation-level errors (complete failure). This enforces atomic semantics at the operation level while allowing per-item failures within successful operations.",
  "type": "object",
  "oneOf": [
    {
      "title": "SyncCreativesSuccess",
      "description": "Success response - sync operation processed creatives (may include per-item failures)",
      "type": "object",
      "properties": {
        "dry_run": {
          "type": "boolean",
          "description": "Whether this was a dry run (no actual changes made)"
        },
        "creatives": {
          "type": "array",
          "description": "Results for each creative processed. Items with action='failed' indicate per-item validation/processing failures, not operation-level failures.",
          "items": {
            "type": "object",
            "properties": {
              "creative_id": {
                "type": "string",
                "description": "Creative ID from the request"
              },
              "account": {
                "title": "Account",
                "description": "Account that owns this creative",
                "type": "object",
                "properties": {
                  "account_id": {
                    "type": "string",
                    "description": "Unique identifier for this account"
                  },
                  "name": {
                    "type": "string",
                    "description": "Human-readable account name (e.g., 'Acme', 'Acme c/o Pinnacle')"
                  },
                  "advertiser": {
                    "type": "string",
                    "description": "The advertiser whose rates apply to this account"
                  },
                  "billing_proxy": {
                    "type": "string",
                    "description": "Optional intermediary who receives invoices on behalf of the advertiser (e.g., agency)"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "pending_approval",
                      "rejected",
                      "payment_required",
                      "suspended",
                      "closed"
                    ],
                    "description": "Account status. pending_approval: seller reviewing (credit, contracts). rejected: seller declined the account request. payment_required: credit limit reached or funds depleted. suspended: was active, now paused. closed: was active, now terminated."
                  },
                  "brand": {
                    "title": "Brand Reference",
                    "description": "Brand reference identifying the advertiser",
                    "type": "object",
                    "properties": {
                      "domain": {
                        "type": "string",
                        "description": "Domain where /.well-known/brand.json is hosted, or the brand's operating domain",
                        "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                      },
                      "brand_id": {
                        "title": "Brand ID",
                        "description": "Brand identifier within the house portfolio. Optional for single-brand domains.",
                        "type": "string",
                        "pattern": "^[a-z0-9_]+$",
                        "examples": [
                          "tide",
                          "cheerios",
                          "air_jordan",
                          "nike",
                          "pampers"
                        ]
                      }
                    },
                    "required": [
                      "domain"
                    ],
                    "additionalProperties": false,
                    "examples": [
                      {
                        "domain": "nova-brands.com",
                        "brand_id": "spark"
                      },
                      {
                        "domain": "nova-brands.com",
                        "brand_id": "glow"
                      },
                      {
                        "domain": "acme-corp.com"
                      }
                    ]
                  },
                  "operator": {
                    "type": "string",
                    "description": "Domain of the entity operating this account. When the brand operates directly, this is the brand's domain.",
                    "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                  },
                  "billing": {
                    "type": "string",
                    "enum": [
                      "operator",
                      "agent"
                    ],
                    "description": "Who is invoiced on this account. operator: seller invoices the operator (agency or brand buying direct). agent: agent consolidates billing."
                  },
                  "rate_card": {
                    "type": "string",
                    "description": "Identifier for the rate card applied to this account"
                  },
                  "payment_terms": {
                    "type": "string",
                    "description": "Payment terms (e.g., 'net_30', 'prepay')"
                  },
                  "credit_limit": {
                    "type": "object",
                    "description": "Maximum outstanding balance allowed",
                    "properties": {
                      "amount": {
                        "type": "number",
                        "minimum": 0
                      },
                      "currency": {
                        "type": "string",
                        "pattern": "^[A-Z]{3}$"
                      }
                    },
                    "required": [
                      "amount",
                      "currency"
                    ]
                  },
                  "setup": {
                    "type": "object",
                    "description": "Present when status is 'pending_approval'. Contains next steps for completing account activation.",
                    "properties": {
                      "url": {
                        "type": "string",
                        "format": "uri",
                        "description": "URL where the human can complete the required action (credit application, legal agreement, add funds)."
                      },
                      "message": {
                        "type": "string",
                        "description": "Human-readable description of what's needed."
                      },
                      "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "When this setup link expires."
                      }
                    },
                    "required": [
                      "message"
                    ],
                    "additionalProperties": true
                  },
                  "account_scope": {
                    "type": "string",
                    "enum": [
                      "operator",
                      "brand",
                      "operator_brand",
                      "agent"
                    ],
                    "description": "How the seller scoped this account. operator: shared across all brands for this operator. brand: shared across all operators for this brand. operator_brand: dedicated to a specific operator+brand combination. agent: the agent's default account with no brand or operator association."
                  },
                  "sandbox": {
                    "type": "boolean",
                    "description": "When true, this is a sandbox account. All requests using this account_id are treated as sandbox â€” no real platform calls, no real spend."
                  },
                  "ext": {
                    "title": "Extension Object",
                    "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
                    "type": "object",
                    "additionalProperties": true
                  }
                },
                "required": [
                  "account_id",
                  "name",
                  "status"
                ],
                "additionalProperties": true,
                "examples": [
                  {
                    "description": "Direct advertiser account",
                    "data": {
                      "account_id": "acc_acme_direct",
                      "name": "Acme",
                      "advertiser": "Acme Corp",
                      "brand": {
                        "domain": "acme-corp.com"
                      },
                      "operator": "acme-corp.com",
                      "status": "active",
                      "billing": "operator",
                      "account_scope": "brand",
                      "rate_card": "acme_vip_2024",
                      "payment_terms": "net_30"
                    }
                  },
                  {
                    "description": "Advertiser account with agency billing proxy",
                    "data": {
                      "account_id": "acc_acme_pinnacle",
                      "name": "Acme c/o Pinnacle",
                      "advertiser": "Acme Corp",
                      "billing_proxy": "Pinnacle Media",
                      "brand": {
                        "domain": "acme-corp.com"
                      },
                      "operator": "pinnacle-media.com",
                      "status": "active",
                      "billing": "operator",
                      "account_scope": "operator_brand",
                      "rate_card": "acme_vip_2024",
                      "payment_terms": "net_60"
                    }
                  },
                  {
                    "description": "Agency as direct buyer",
                    "data": {
                      "account_id": "acc_pinnacle",
                      "name": "Pinnacle",
                      "advertiser": "Pinnacle Media",
                      "brand": {
                        "domain": "pinnacle-media.com"
                      },
                      "operator": "pinnacle-media.com",
                      "status": "active",
                      "billing": "operator",
                      "account_scope": "operator",
                      "rate_card": "agency_standard",
                      "payment_terms": "net_45"
                    }
                  },
                  {
                    "description": "Account with brand identity and operator (via sync_accounts)",
                    "data": {
                      "account_id": "acc_spark_001",
                      "name": "Spark (via Pinnacle)",
                      "advertiser": "Nova Brands",
                      "status": "active",
                      "brand": {
                        "domain": "nova-brands.com",
                        "brand_id": "spark"
                      },
                      "operator": "pinnacle-media.com",
                      "billing": "agent",
                      "account_scope": "operator_brand",
                      "payment_terms": "net_30"
                    }
                  },
                  {
                    "description": "Pending account awaiting seller approval",
                    "data": {
                      "account_id": "acc_glow_pending",
                      "name": "Glow",
                      "advertiser": "Nova Brands",
                      "status": "pending_approval",
                      "brand": {
                        "domain": "nova-brands.com",
                        "brand_id": "glow"
                      },
                      "operator": "pinnacle-media.com",
                      "billing": "operator",
                      "account_scope": "brand"
                    }
                  }
                ]
              },
              "action": {
                "title": "Creative Action",
                "description": "Action taken for this creative",
                "type": "string",
                "enum": [
                  "created",
                  "updated",
                  "unchanged",
                  "failed",
                  "deleted"
                ]
              },
              "platform_id": {
                "type": "string",
                "description": "Platform-specific ID assigned to the creative"
              },
              "changes": {
                "type": "array",
                "description": "Field names that were modified (only present when action='updated')",
                "items": {
                  "type": "string"
                }
              },
              "errors": {
                "type": "array",
                "description": "Validation or processing errors (only present when action='failed')",
                "items": {
                  "type": "string"
                }
              },
              "warnings": {
                "type": "array",
                "description": "Non-fatal warnings about this creative",
                "items": {
                  "type": "string"
                }
              },
              "preview_url": {
                "type": "string",
                "format": "uri",
                "description": "Preview URL for generative creatives (only present for generative formats)"
              },
              "expires_at": {
                "type": "string",
                "format": "date-time",
                "description": "ISO 8601 timestamp when preview link expires (only present when preview_url exists)"
              },
              "assigned_to": {
                "type": "array",
                "description": "Package IDs this creative was successfully assigned to (only present when assignments were requested)",
                "items": {
                  "type": "string"
                }
              },
              "assignment_errors": {
                "type": "object",
                "description": "Assignment errors by package ID (only present when assignment failures occurred)",
                "patternProperties": {
                  "^[a-zA-Z0-9_-]+$": {
                    "type": "string",
                    "description": "Error message for this package assignment"
                  }
                },
                "additionalProperties": true
              }
            },
            "required": [
              "creative_id",
              "action"
            ],
            "additionalProperties": true
          }
        },
        "sandbox": {
          "type": "boolean",
          "description": "When true, this response contains simulated data from sandbox mode."
        },
        "context": {
          "title": "Context Object",
          "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
          "type": "object",
          "additionalProperties": true
        },
        "ext": {
          "title": "Extension Object",
          "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "creatives"
      ],
      "additionalProperties": true,
      "not": {
        "required": [
          "errors"
        ]
      }
    },
    {
      "title": "SyncCreativesError",
      "description": "Error response - operation failed completely, no creatives were processed",
      "type": "object",
      "properties": {
        "errors": {
          "type": "array",
          "description": "Operation-level errors that prevented processing any creatives (e.g., authentication failure, service unavailable, invalid request format)",
          "items": {
            "title": "Error",
            "description": "Standard error structure for task-specific errors and warnings",
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "Error code for programmatic handling"
              },
              "message": {
                "type": "string",
                "description": "Human-readable error message"
              },
              "field": {
                "type": "string",
                "description": "Field path associated with the error (e.g., 'packages[0].targeting')"
              },
              "suggestion": {
                "type": "string",
                "description": "Suggested fix for the error"
              },
              "retry_after": {
                "type": "number",
                "description": "Seconds to wait before retrying the operation",
                "minimum": 0
              },
              "details": {
                "type": "object",
                "description": "Additional task-specific error details",
                "additionalProperties": true
              }
            },
            "required": [
              "code",
              "message"
            ],
            "additionalProperties": true
          },
          "minItems": 1
        },
        "context": {
          "title": "Context Object",
          "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
          "type": "object",
          "additionalProperties": true
        },
        "ext": {
          "title": "Extension Object",
          "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "errors"
      ],
      "additionalProperties": true,
      "not": {
        "anyOf": [
          {
            "required": [
              "creatives"
            ]
          },
          {
            "required": [
              "dry_run"
            ]
          },
          {
            "required": [
              "sandbox"
            ]
          }
        ]
      }
    }
  ],
  "_bundled": {
    "generatedAt": "2026-02-26T12:28:33.841Z",
    "note": "This is a bundled schema with all $ref resolved inline. For the modular version with references, use the parent directory."
  }
}