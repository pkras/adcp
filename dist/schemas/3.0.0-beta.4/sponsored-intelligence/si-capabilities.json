{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-beta.4/sponsored-intelligence/si-capabilities.json",
  "title": "SI Capabilities",
  "description": "Capabilities that a brand agent declares or a host supports",
  "type": "object",
  "properties": {
    "modalities": {
      "type": "object",
      "description": "Interaction modalities supported",
      "properties": {
        "conversational": {
          "type": "boolean",
          "description": "Pure text exchange - the baseline modality",
          "default": true
        },
        "voice": {
          "oneOf": [
            { "type": "boolean" },
            {
              "type": "object",
              "properties": {
                "provider": {
                  "type": "string",
                  "description": "TTS provider (elevenlabs, openai, etc.)"
                },
                "voice_id": {
                  "type": "string",
                  "description": "Brand voice identifier"
                }
              },
              "additionalProperties": true
            }
          ],
          "description": "Audio-based interaction using brand voice"
        },
        "video": {
          "oneOf": [
            { "type": "boolean" },
            {
              "type": "object",
              "properties": {
                "formats": {
                  "type": "array",
                  "items": { "type": "string" },
                  "description": "Supported video formats (mp4, webm, etc.)"
                },
                "max_duration_seconds": {
                  "type": "integer",
                  "description": "Maximum video duration"
                }
              },
              "additionalProperties": true
            }
          ],
          "description": "Brand video content playback"
        },
        "avatar": {
          "oneOf": [
            { "type": "boolean" },
            {
              "type": "object",
              "properties": {
                "provider": {
                  "type": "string",
                  "description": "Avatar provider (d-id, heygen, synthesia, etc.)"
                },
                "avatar_id": {
                  "type": "string",
                  "description": "Brand avatar identifier"
                }
              },
              "additionalProperties": true
            }
          ],
          "description": "Animated video presence with brand avatar"
        }
      },
      "additionalProperties": true
    },
    "components": {
      "type": "object",
      "description": "Visual components supported",
      "properties": {
        "standard": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["text", "link", "image", "product_card", "carousel", "action_button"]
          },
          "description": "Standard components that all SI hosts must render"
        },
        "extensions": {
          "type": "object",
          "description": "Platform-specific extensions (chatgpt_apps_sdk, maps, forms, etc.)",
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "commerce": {
      "type": "object",
      "description": "Commerce capabilities",
      "properties": {
        "acp_checkout": {
          "type": "boolean",
          "description": "Supports ACP (Agentic Commerce Protocol) checkout handoff"
        }
      },
      "additionalProperties": true
    },
    "a2ui": {
      "type": "object",
      "description": "A2UI (Agent-to-UI) capabilities",
      "properties": {
        "supported": {
          "type": "boolean",
          "description": "Supports A2UI surface rendering",
          "default": false
        },
        "catalogs": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Supported A2UI component catalogs (e.g., 'si-standard', 'standard')"
        }
      },
      "additionalProperties": true
    },
    "mcp_apps": {
      "type": "boolean",
      "description": "Supports MCP Apps for rendering A2UI surfaces in iframes",
      "default": false
    }
  },
  "additionalProperties": true
}
